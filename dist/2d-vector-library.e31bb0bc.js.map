{"version":3,"sources":["particle.js","canvas.js","index.js"],"names":["Particle","options","position","x","y","particleColor","size","mass","direction","speed","gravity","friction","bounce","springs","gravitations","vx","Math","cos","vy","sin","springTargetX","springTargetY","springTargetK","hasSpringTarget","forEach","fn","bind","context","fillStyle","beginPath","arc","PI","fill","sqrt","heading","getHeading","atan2","getSpeed","ax","ay","p2","dx","dy","point","removeGravitation","push","p","gravitation","splice","indexOf","gravitateTo","distance","force","k","length","removeSpring","spring","springTo","springLength","springForce","springPoint","originalX","originalY","dp2","tx","ty","handleSprings","handleGravitations","bindAll","addEventListeners","Canvas","canvas","document","getElementById","getContext","dpr","setCanvas","window","addEventListener","width","innerWidth","height","innerHeight","scale","ParticlesGrid","numberParticles","particlesRadius","particlesFriction","targetRadius","marginH","marginV","particles","target","radius","createParticles","updateRender","render","onMouseMove","onMouseDown","onMouseUp","body","event","clientX","clientY","i","j","setSpringTarget","clearRect","particle","think","update","drawParticle","draw","a"],"mappings":"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","file":"2d-vector-library.e31bb0bc.js","sourceRoot":"..","sourcesContent":["class Particle {\n  constructor(options = {}) {\n\n    this.position = options.position || {x: 0, y: 0};\n    this.particleColor = options.particleColor || '#000000';\n    this.size = options.size || 10;\n    this.mass = options.mass || 1;\n\n    this.direction = options.direction || 0;\n    this.speed = options.speed || 0;\n    \n    this.gravity = options.gravity || 0;\n    this.friction = options.friction || 1;\n    this.bounce = options.bounce || -1;\n\n    this.springs = [];\n    this.gravitations = [];\n\n    this.vx = Math.cos(this.direction) * this.speed;\n    this.vy = Math.sin(this.direction) * this.speed;\n\n    this.springTargetX = null,\n    this.springTargetY = null,\n    this.springTargetK = null,\n    this.hasSpringTarget = false;\n  }\n\n  bindAll() {\n    [ 'addEventListeners', 'render', 'drawParticle', 'init']\n      .forEach( fn => this[fn] = this[fn].bind(this));\n  }\n\n  drawParticle(context) {\n    context.fillStyle = this.particleColor;\n    context.beginPath();\n    context.arc(this.position.x, this.position.y, this.size, 0, Math.PI * 2, false);\n    context.fill();\n  }\n\n  getSpeed() {\n    return Math.sqrt(this.vx * this.vx + this.vy * this.vy);\n  }\n\n  setSpeed(speed) {\n    const heading = this.getHeading();\n    this.vx = Math.cos(heading) * speed;\n    this.vy = Math.sin(heading) * speed;\n  }\n\n  getHeading() {\n    return Math.atan2(this.vy, this.vx);\n  }\n\n  setHeading(heading) { \n    const speed = this.getSpeed();\n    this.vx = Math.cos(heading) * speed;\n    this.vy = Math.sin(heading) * speed;\n  }\n\n  accelerate(ax, ay) {\n    this.vx += ax;\n    this.vy += ay;\n  }\n\n  angleTo(p2) {\n    return Math.atan2(p2.position.y - this.position.y, p2.position.x - this.position.x);\n  }\n\n  distanceTo(p2) {\n    const dx = p2.position.x - this.position.x; \n    const dy = p2.position.y - this.position.y;\n    return Math.sqrt(dx * dx + dy * dy);\n  }\n\n  addGravitation(point) {\n    this.removeGravitation(point);\n    this.gravitations.push(point);\n  }\n\n  removeGravitation(p) {\n    this.gravitations.forEach(gravitation => {\n      if(p === gravitation.p) {\n        this.gravitations.splice(this.gravitations.indexOf(p), 1);\n        return;\n      }\n    });\n  }\n\n  handleGravitations() {\n    this.gravitations.forEach(gravitation => {\n      this.gravitateTo(gravitation);\n    });\n  }\n\n  gravitateTo(p2) {\n    const dx = p2.position.x - this.position.x;\n    const dy = p2.position.y - this.position.y;\n\n    const distance = Math.sqrt(dx * dx + dy * dy);\n    const force = p2.mass / (distance * distance);\n\n    const ax = dx / distance * force;\n    const ay = dy / distance * force;\n\n    this.vx += ax;\n    this.vy += ay;\n  }\n\n  setSpringTarget(x, y, k) {\n    this.springTargetX = x;\n    this.springTargetY = y;\n    this.springTargetK = k || 0.02;\n    this.hasSpringTarget = true;\n  }\n\n  addSpring(point, k, length = 0) {\n    this.removeSpring(point);\n    this.springs.push({\n      point: point,\n      k: k,\n      length: length\n    });\n  }\n\n  removeSpring(point) {\n    this.springs.forEach(spring => {\n      if(point === spring.point) {\n        this.springs.splice(this.springs.indexOf(point), 1);\n        return;\n      }\n    });\n  }\n\n  handleSprings() {\n    this.springs.forEach(spring => {\n      this.springTo(spring.point, spring.k, spring.length);\n    });\n  }\n\n  springTo(p2, k, springLength = 0) {\n    const dx = p2.position.x - this.position.x;\n    const dy = p2.position.y - this.position.y;\n    const distance = Math.sqrt(dx * dx + dy * dy);\n    const springForce = (distance - springLength) * k;\n    this.vx += dx / distance * springForce;\n    this.vy += dy / distance * springForce;\n  }\n\n  springFrom(springPoint, k, springLength) {\n    let dx = springPoint.x - this.x,\n        dy = springPoint.y - this.y,\n        distance = Math.sqrt(dx * dx + dy * dy),\n        springForce = (distance - springLength || 0) * k;\n    if(distance < springLength) {\n      this.vx += dx / distance * springForce,\n      this.vy += dy / distance * springForce;\n    }\n  }\n\n  springBack(k) {\n    let dx = -(this.x - this.originalX),\n        dy = -(this.y - this.originalY);\n    this.vx += dx * k,\n    this.vy += dy * k;\n  }\n\n  think(p2, dp2) {\n    let dx = this.x - p2.x,\n        dy = this.y - p2.y,\n        distance = Math.sqrt(dx * dx + dy * dy);\n\n    if(distance < dp2) {\n      let tx = p2.x + dx / distance * dp2,\n          ty = p2.y + dy / distance * dp2;\n      this.vx += tx - this.x;\n      this.vy += ty - this.y;\n    }\n  }\n\n  update() {\n    this.handleSprings();\n    this.handleGravitations();\n\n    if (this.hasSpringTarget) {\n      this.vx += (this.springTargetX - this.x) * this.springTargetK;\n      this.vy += (this.springTargetY - this.y) * this.springTargetK;\n    }\n\n    this.vx *= this.friction;\n    this.vy *= this.friction;\n\n    this.vy += this.gravity;\n    \n    this.position.x += this.vx;\n    this.position.y += this.vy;\n  }\n\n  init() {\n    this.bindAll();\n    this.addEventListeners();\n  }\n}\n\nexport { Particle };","class Canvas {\n  constructor() {\n    this.canvas = document.getElementById('canvas')\n    this.context = this.canvas.getContext('2d');\n    // this.dpr = window.devicePixelRatio || 1;\n    this.dpr = 1;\n    \n    this.setCanvas();\n    window.addEventListener('resize', () => this.setCanvas());\n  }\n\n  setCanvas() {\n    this.canvas.width = window.innerWidth * this.dpr;\n    this.canvas.height = window.innerHeight * this.dpr;\n\n    this.context.scale(this.dpr, this.dpr);\n  }\n}\n\nexport { Canvas };","import { Particle } from './particle.js';\nimport { Canvas } from './canvas.js';\n\n\nexport class ParticlesGrid extends Canvas {\n  constructor(options = {}) {\n    super();\n\n    const {\n      numberParticles = 20, \n      particlesRadius = 3, \n      particlesFriction = 0.9, \n      k = 0.02, \n      targetRadius = 100\n    } = options;\n\n    this.dx = 0;\n    this.dy = 0;\n    \n    this.numberParticles = numberParticles;\n    this.marginH = this.canvas.width / this.numberParticles;\n    this.marginV = this.canvas.height / this.numberParticles;\n    this.particles = [];\n\n    this.target = new Particle();\n    this.target.radius = targetRadius;\n    \n    this.createParticles(particlesRadius, particlesFriction, k);\n    \n    this.updateRender = this.render.bind(this);\n    // requestAnimationFrame(this.updateRender);\n    this.render();\n    this.onMouseMove(this.target);\n    this.onMouseDown(this.target);\n    this.onMouseUp(this.target);\n  }\n\n  onMouseMove(target) {\n    document.body.addEventListener('mousemove', function(event) {\n      target.x = event.clientX;\n      target.y = event.clientY;\n    });\n  }\n\n  onMouseDown(target) {\n    document.body.addEventListener('mousedown', function() {\n      target.radius = target.radius * 3;\n    });\n  }\n\n  onMouseUp(target) {\n    document.body.addEventListener('mouseup', function() {\n      target.radius = target.radius / 3;\n    });\n  }\n\n  createParticles(radius, friction, k) {\n    for (let i = 0; i < this.numberParticles; i++) {\n      for (let j = 0; j < this.numberParticles; j++) {\n        let p = new Particle ({\n                                position: { x: i * this.marginH + this.marginH/2, y: j * this.marginV + this.marginV/2 }, \n                                size: radius,\n                                friction: friction\n                            });\n        p.i = i + j;\n        p.setSpringTarget(p.x, p.y, k);\n        this.particles.push(p);  \n      }\n    }\n  }\n\n  draw() {\n    this.context.clearRect(0, 0, this.width, this.height);\n  \n    this.particles.forEach(particle => {\n      particle.i += 0.05;\n      particle.think(this.target, this.target.radius);\n      particle.update();\n      particle.drawParticle(this.context);\n    });\n  }\n\n  render() {\n    this.draw();\n    // requestAnimationFrame(this.updateRender);\n  }\n\n}\n\nconst a = new ParticlesGrid();"]}